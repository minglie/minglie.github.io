
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <script src="https://minglie.gitee.io/mingpage/static/public/monacoeditor/min/vs/loader.js"></script>
    <style>
        body,html{
            margin:0;
            padding:0;
            height:500000px;
        }
        #box{
            width:100%;
            height:100%;
            overflow:hidden;
        }
        #left{
            margin-top: 10px;
            width:calc(100% - 5px);
            height:100%;
            float:left;
        }



    </style>
</head>
<body>

<div >

</div>

<div id="box">
    <div id="left">
    </div>
</div>
</body>
</html>


<script  type="module">
    let F={};
    let F_fileName=window.location.hash.replaceAll("#","");
    let M={}
    M.languageMap={
        "js":"javascript",
        "jsx":"javascript",
        "md":"markdown",
        "conf":"lua"
    }
    let language="javascript";
    for (let item in  M.languageMap){
        if(F_fileName.endsWith("."+item)){
            language=M.languageMap[item];
            break;
        }
    }
    let text= await fetch(F_fileName).then(d=>d.text())
    require.config({
        baseUrl: 'https://minglie.gitee.io/mingpage/static/public/monacoeditor/', paths: { 'vs': 'min/vs' }
    });
    require(['vs/editor/editor.main'], function() {
        var editor = monaco.editor.create(document.getElementById('left'), {
            value: [
                text
            ].join('\n'),
            language: language,
            theme:'vs-dark',
            automaticLayout:true,
            scrollbar: {
                useShadows:false,
                vertical:'visible',
                horizontal:'visible',
                horizontalSliderSize:5,
                verticalSliderSize:5,
                horizontalScrollbarSize:15,
                verticalScrollbarSize:15,
            },
            wordWrap: "on",
            quickSuggestions:true,
            overviewRulerBorder:true,
            minimap: {
                enabled:false
            }
        });

        M.left_editor=editor;
    });

    var resize = document.getElementById("resize");
    var left = document.getElementById("left");
    var right = document.getElementById("right");
    var box = document.getElementById("box");
    resize.onmousedown = function(e){
        var startX = e.clientX;
        resize.left = resize.offsetLeft;
        document.onmousemove = function(e){
            var endX = e.clientX;
            var moveLen = resize.left + (endX - startX);
            var maxT = box.clientWidth - resize.offsetWidth;
            if(moveLen<150) moveLen = 150;
            if(moveLen>maxT-150) moveLen = maxT-150;
            resize.style.left = moveLen;
            left.style.width = moveLen + "px";
            right.style.width = (box.clientWidth - moveLen - 5) + "px";
            //console.log(right.style.width,"WW")
            fetch(right.style.width)
        }
        document.onmouseup = function(evt){
            document.onmousemove = null;
            document.onmouseup = null;
            resize.releaseCapture && resize.releaseCapture();
        }
        resize.setCapture && resize.setCapture();
        return false;
    }



</script>


