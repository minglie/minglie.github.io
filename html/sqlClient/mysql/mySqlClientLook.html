<!doctype html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <meta http-equiv="X-UA-Compatible" content="ie=edge">    <title>index</title>    <link rel="stylesheet" type="text/css" href="https://minglie.github.io/public/easyui/css/easyui.css">    <link rel="stylesheet" type="text/css" href="https://minglie.github.io/public/easyui/css/icon.css">    <script src="https://minglie.github.io/public/easyui/js/jquery.min.js"></script>    <script src="https://minglie.github.io/js/M_mock.js"></script>    <script type="text/javascript" src="https://minglie.github.io/public/easyui/js/jquery.easyui.min.js"></script>    <script>        M.host = "http://localhost:11111";        M.tableInfo = [];        M.currentTableName = "";        M.databaseName = "ming-lie";        app.post("/listByPageMeta", function (req, res) {            if (!M.currentTableName) {                res.send([]);                return;            }            const sql = `       SELECT COLUMN_NAME,COLUMN_TYPE,column_comment FROM INFORMATION_SCHEMA.Columns WHERE table_name='${M.currentTableName}' AND table_schema='${M.databaseName}';        `;            M.doSql(sql, (d) => {                rows = d.data;                res.send({rows});            })        });        app.post("/listByPageData", function (req, res) {            if (!M.currentTableName) {                res.send([]);                return;            }            const sql1 = `        select * from ${M.currentTableName}  limit ${(req.params.page - 1) * req.params.rows},${req.params.rows};        `;            const sql2 = ` select count(1) c from ${M.currentTableName};`;            M.doSql(sql1, (d) => {                let rows = d.data;                M.doSql(sql2, (d) => {                    let total = d.data[0].c;                    res.send({rows, total});                });            })        });        app.post("/listAllTableName", function (req, res) {            const sql = `SELECT TABLE_NAME,TABLE_COMMENT FROM information_schema.TABLES WHERE table_schema='${M.databaseName}';`;            M.doSql(sql, (d) => {                rows = d.data.map(u => {                    //console.log("AAA",u)                    let o = {};                    o.TABLE_NAME = u["TABLE_NAME"];                    o.TABLE_COMMENT=u["TABLE_COMMENT"];                    return o;                });                if(M.disPlayTable){                    rows=rows.filter(o=>{return  M.disPlayTable.indexOf(o.TABLE_NAME)>-1})                }                res.send({rows});            })        });        function TABLE_NAME_Click(row){            //console.log(row.type,"AAAAAAAAAAAAAAA")            M.currentTableName=row.type;            M.doSql(`SELECT column_name,column_type,column_comment FROM information_schema.COLUMNS WHERE TABLE_NAME='${M.currentTableName}' and TABLE_SCHEMA='${M.databaseName}';`,(d)=>{                M.tableInfo=d.data;                M.is_resourceDataGridData=true                init();            })        }        function TABLE_COMMENT_Click(row){            //console.log(row.type,"WWWWWWWWWWWWWW")            M.currentTableName=row.type;            M.is_resourceDataGridData=false            init();        }        function init(){            if(M.is_resourceDataGridData){                var myColumns=[];                myColumns[0]=M.tableInfo.map(function (u) {                    let obj={};                    obj.field=u.column_name;                    obj.title=u.column_name+"("+u.column_comment+")";                    return obj;                });                myColumns[0]=[{checkbox:true},... myColumns[0]];                $('#resourceDataGrid').datagrid({                    url:"/listByPageData",                    width:10000,                    rownumbers:true,//使能行号列                    pagination:true,//显示分页工具栏                    pageSize:20,//在设置分页属性的时候初始化页面大小。                    pageList:[20,30,40,50],//在设置分页属性的时候 初始化页面大小选择列表。                    rowStyler:function(rowIndex,rowData){                        if(rowData.id%2==0){                            return "background-color:pink";                        }                    },                    columns:myColumns                });            }else{                $('#resourceDataGrid').datagrid({                    url:"/listByPageMeta",                    width:10000,                    rownumbers:true,                    columns:[[                        {checkbox:false},                        {field:'COLUMN_NAME',title:'列名',width:200},                        {field:'COLUMN_TYPE',title:'类型',width:200},                        {field:'column_comment',title:'说明',width:200}                    ]]                });            }        }        (function() {            $(function(){                init();//初始化DataGrid                $('#leftMeau').datagrid({                    url:"/listAllTableName",                    checkOnSelect: false,                    selectOnCheck: true,                    columns:[[                        {checkbox:false},                        {field:'TABLE_NAME',title:'表名',width:250,                            formatter: function(value,row,index){                                var str = `<a href='javascript:void(0)' type='${row.TABLE_NAME}' onclick='TABLE_NAME_Click(this)'>${row.TABLE_NAME}</a>`;                                return str;                            }                        },                        {field:'TABLE_COMMENT',title:'说明',width:250,                            formatter: function(value,row,index){                                var str = `<a href='javascript:void(0)' type='${row.TABLE_NAME}' onclick='TABLE_COMMENT_Click(this)'>${row.TABLE_COMMENT}</a>`;                                return str;                            }                        }                    ]]                });            })        })();    </script></head><body class="easyui-layout"><div data-options="region:'west',title:'表'" style="width:500px;">    <table id="leftMeau" data-options="singleSelect:true,collapsible:true,url:'datagrid_data1.json',fitColumns:'true'"></table></div><div id="center" data-options="region:'center',title:'数据展示'">    <table id="resourceDataGrid" width="100%"></table></div></body></html>